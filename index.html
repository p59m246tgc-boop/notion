<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont;
      background: transparent;
    }
    .wrap { padding: 12px 14px; }
    .text { white-space: pre-wrap; font-size: 18px; line-height: 1.4; }
  </style>
</head>
<body>
  <div class="wrap">
    <div id="out" class="text">loading…</div>
  </div>

  <script>
    const PT_TZ = "America/Los_Angeles";
    const END_HOUR = 18; // 6 PM PT
    const PUBLIC_DAYS = [1, 3]; // Monday (1), Wednesday (3)

    function nowPT() {
      return new Date(new Date().toLocaleString("en-US", { timeZone: PT_TZ }));
    }

    function greeting(h) {
      if (h < 5) return "Hey sweetheart...it's nice to see you.";
      if (h < 12) return "Good Morning Natasha!";
      if (h < 18) return "Good Afternoon Natasha!";
      return "Good Evening Natasha!";
    }

    function remainingUntilSix(ptNow) {
      const end = new Date(ptNow);
      end.setHours(END_HOUR, 0, 0, 0);
      let diff = end - ptNow;
      if (diff < 0) diff = 0;
      const mins = Math.floor(diff / 60000);
      return { hours: Math.floor(mins / 60), minutes: mins % 60 };
    }

    function formatLocalTimeLower(d) {
      return new Intl.DateTimeFormat(undefined, {
        hour: "numeric",
        minute: "2-digit",
        hour12: true
      }).format(d).replace("AM","am").replace("PM","pm");
    }

    function nightMessage(localHour) {
      if (localHour >= 24 || localHour < 5) return "Thank you for saying hi, now sleep please.I'll be here tomorrow.";
      if (localHour >= 22) return "have a good sleep!";
      return "get some rest.";
    }

    // Home-day line selection (PT times)
    function homeDayLine(ptNow) {
      const h = ptNow.getHours();
      const m = ptNow.getMinutes();

      // 5:00–5:59
      if (h === 5) {
        return "i hope you just woke up… c’mon, let’s start with this love.";
      }

      // 6:00–10:29
      if ((h >= 6 && h <= 9) || (h === 10 && m <= 29)) {
        return "it’s early. i know. i’m sorry…you got this sweetheart.";
      }

      // 10:30–10:59
      if (h === 10 && m >= 30) {
        return "okay sweet girl, we’ll get some lunch soon..";
      }

      // 11:00–11:59
      if (h === 11) {
        return "it’s show time...pause work and put your show on and make food.\nNothing else is allowed love. Eat please.";
      }

      // 12:00–12:30
      if (h === 12 && m <= 30) {
        return "okay. we can head back now. nice and easy.";
      }

      // Default for the rest of the daytime work window
      return "okay… let’s work on this next.";
    }

    function tick() {
      const ptNow = nowPT();
      const localNow = new Date();

      const ptHour = ptNow.getHours();
      const greet = greeting(ptHour);

      const isPublicDay = PUBLIC_DAYS.includes(ptNow.getDay());

      // Night mode includes after 6pm PT AND 12:00–4:59am PT (prevents midnight countdown jump)
      const isNightMode = (ptHour >= END_HOUR) || (ptHour < 5);

      if (!isNightMode) {
        const t = remainingUntilSix(ptNow);

        const line = isPublicDay
          ? "okay… let’s work on this next."
          : homeDayLine(ptNow);

        document.getElementById("out").textContent =
          `${greet}\n\n` +
          `You have ${t.hours} hours and ${t.minutes} minutes left today.\n\n` +
          line;
      } else {
        const timeStr = formatLocalTimeLower(localNow);
        const msg = nightMessage(localNow.getHours());

        document.getElementById("out").textContent =
          `${greet}\n\n` +
          `it’s ${timeStr}, ${msg}`;
      }
    }

    tick();
    setInterval(tick, 15000);
  </script>
</body>
</html>
